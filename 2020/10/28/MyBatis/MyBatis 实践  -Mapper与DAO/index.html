<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>MyBatis 实践 Mapper 与 DAO | 欢迎来到SuperZhang的个人空间</title><meta name="keywords" content="MyBatis,项目实战"><meta name="author" content="Zhang Hao"><meta name="copyright" content="Zhang Hao"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="description" content="MyBatis 实践  -Mapper与DAO标签： Java与存储  MyBatis简介MyBatis前身是iBatis,是一个基于Java的数据持久层&#x2F;对象关系映射(ORM)框架.    MyBatis是对JDBC的封装,使开发人员只需关注SQL本身,而不需花费过多的精力去处理如注册驱动、设置参数、创建Connection&#x2F;Statement**、解析结果集**等JDBC过程性代码.MyBat">
<meta property="og:type" content="article">
<meta property="og:title" content="MyBatis 实践 Mapper 与 DAO">
<meta property="og:url" content="http://example.com/2020/10/28/MyBatis/MyBatis%20%E5%AE%9E%E8%B7%B5%20%20-Mapper%E4%B8%8EDAO/index.html">
<meta property="og:site_name" content="欢迎来到SuperZhang的个人空间">
<meta property="og:description" content="MyBatis 实践  -Mapper与DAO标签： Java与存储  MyBatis简介MyBatis前身是iBatis,是一个基于Java的数据持久层&#x2F;对象关系映射(ORM)框架.    MyBatis是对JDBC的封装,使开发人员只需关注SQL本身,而不需花费过多的精力去处理如注册驱动、设置参数、创建Connection&#x2F;Statement**、解析结果集**等JDBC过程性代码.MyBat">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://example.com/2020/10/28/MyBatis/MyBatis%20%E5%AE%9E%E8%B7%B5%20%20-Mapper%E4%B8%8EDAO/MyBatis1.jpg">
<meta property="article:published_time" content="2020-10-28T01:53:47.000Z">
<meta property="article:modified_time" content="2020-11-14T12:36:05.665Z">
<meta property="article:author" content="Zhang Hao">
<meta property="article:tag" content="MyBatis">
<meta property="article:tag" content="项目实战">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/2020/10/28/MyBatis/MyBatis%20%E5%AE%9E%E8%B7%B5%20%20-Mapper%E4%B8%8EDAO/MyBatis1.jpg"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://example.com/2020/10/28/MyBatis/MyBatis%20%E5%AE%9E%E8%B7%B5%20%20-Mapper%E4%B8%8EDAO/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":50,"languages":{"author":"作者: Zhang Hao","link":"链接: ","source":"来源: 欢迎来到SuperZhang的个人空间","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  ClickShowText: {"text":"I,LOVE,YOU,♥♥♥","fontSize":"15px"},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#121212","position":"bottom-center"},
  justifiedGallery: {
    js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
    css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
};

var saveToLocal = {
  set: function setWithExpiry(key, value, ttl) {
    const now = new Date()
    const expiryDay = ttl * 86400000
    const item = {
      value: value,
      expiry: now.getTime() + expiryDay,
    }
    localStorage.setItem(key, JSON.stringify(item))
  },

  get: function getWithExpiry(key) {
    const itemStr = localStorage.getItem(key)

    if (!itemStr) {
      return undefined
    }
    const item = JSON.parse(itemStr)
    const now = new Date()

    if (now.getTime() > item.expiry) {
      localStorage.removeItem(key)
      return undefined
    }
    return item.value
  }
}</script><script id="config_change">var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2020-11-14 20:36:05'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(function () {  window.activateDarkMode = function () {
    document.documentElement.setAttribute('data-theme', 'dark')
    if (document.querySelector('meta[name="theme-color"]') !== null) {
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
    }
  }
  window.activateLightMode = function () {
    document.documentElement.setAttribute('data-theme', 'light')
   if (document.querySelector('meta[name="theme-color"]') !== null) {
      document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
    }
  }
  const autoChangeMode = 'false'
  const t = saveToLocal.get('theme')
  if (autoChangeMode === '1') {
    const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
    const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
    const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
    const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified
    if (t === undefined) {
      if (isLightMode) activateLightMode()
      else if (isDarkMode) activateDarkMode()
      else if (isNotSpecified || hasNoSupport) {
        const now = new Date()
        const hour = now.getHours()
        const isNight = hour <= 6 || hour >= 18
        isNight ? activateDarkMode() : activateLightMode()
      }
      window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
        if (saveToLocal.get('theme') === undefined) {
          e.matches ? activateDarkMode() : activateLightMode()
        }
      })
    } else if (t === 'light') activateLightMode()
    else activateDarkMode()
  } else if (autoChangeMode === '2') {
    const now = new Date()
    const hour = now.getHours()
    const isNight = hour <= 6 || hour >= 18
    if (t === undefined) isNight ? activateDarkMode() : activateLightMode()
    else if (t === 'light') activateLightMode()
    else activateDarkMode()
  } else {
    if (t === 'dark') activateDarkMode()
    else if (t === 'light') activateLightMode()
  }const asideStatus = saveToLocal.get('aside-status')
if (asideStatus !== undefined) {
   if (asideStatus === 'hide') {
     document.documentElement.classList.add('hide-aside')
   } else {
     document.documentElement.classList.remove('hide-aside')
   }
}})()</script><meta name="generator" content="Hexo 5.2.0"></head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="author-avatar"><img class="avatar-img" src="/img/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">39</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">24</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">10</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 娱乐</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page" href="/Gallery/"><i class="fa-fw fas fa-images"></i><span> 图库</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(/2020/10/28/MyBatis/MyBatis%20%E5%AE%9E%E8%B7%B5%20%20-Mapper%E4%B8%8EDAO/MyBatis1.jpg)"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">欢迎来到SuperZhang的个人空间</a></span><span id="menus"><div id="search_button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 娱乐</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fas fa-music"></i><span> 音乐</span></a></li><li><a class="site-page" href="/Gallery/"><i class="fa-fw fas fa-images"></i><span> 图库</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><span class="close" id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></span></span></nav><div id="post-info"><h1 class="post-title">MyBatis 实践 Mapper 与 DAO</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2020-10-28T01:53:47.000Z" title="发表于 2020-10-28 09:53:47">2020-10-28</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2020-11-14T12:36:05.665Z" title="更新于 2020-11-14 20:36:05">2020-11-14</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/MyBatis/">MyBatis</a></span></div><div class="meta-secondline"> <span class="post-meta-separator">|</span><span class="post-meta-pv-cv"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="MyBatis-实践-Mapper与DAO"><a href="#MyBatis-实践-Mapper与DAO" class="headerlink" title="MyBatis 实践  -Mapper与DAO"></a>MyBatis 实践  -Mapper与DAO</h1><p>标签： Java与存储</p>
<hr>
<h2 id="MyBatis简介"><a href="#MyBatis简介" class="headerlink" title="MyBatis简介"></a>MyBatis简介</h2><p><strong>MyBatis</strong>前身是<strong>iBatis</strong>,是一个基于Java的<strong>数据持久层/对象关系映射(ORM)框架</strong>. </p>
<p><img src="https://mybatis.org/images/mybatis-logo.png"></p>
<p> MyBatis是对JDBC的封装,使开发人员只需关注SQL本身,而不需花费过多的精力去处理如<strong>注册驱动</strong>、<strong>设置参数</strong>、<strong>创建<code>Connection</code>/<code>Statement</code>**、</strong>解析结果集**等JDBC过程性代码.MyBatis基于XML/注解的方式配置<code>Statement</code>,执行SQL,并将执行结果映射成Java对象, 大大降低了数据库开发的难度.</p>
<blockquote>
<p>MyBatis is a first class persistence framework with support for  custom SQL, stored procedures and advanced mappings. MyBatis eliminates  almost all of the JDBC code and manual setting of parameters and  retrieval of results. MyBatis can use simple XML or Annotations for  configuration and map primitives, Map interfaces and Java POJOs (Plain  Old Java Objects) to database records.<br> – MyBatis<a target="_blank" rel="noopener" href="https://github.com/mybatis/mybatis-3">项目地址</a>/<a target="_blank" rel="noopener" href="http://www.mybatis.org/mybatis-3/">在线文档</a>.</p>
</blockquote>
<hr>
<h2 id="初识MyBatis"><a href="#初识MyBatis" class="headerlink" title="初识MyBatis"></a>初识MyBatis</h2><p>使用MyBatis需要在pom.xml中添加如下依赖:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;org.mybatis&lt;&#x2F;groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;mybatis&lt;&#x2F;artifactId&gt;</span><br><span class="line">    &lt;version&gt;3.3.0&lt;&#x2F;version&gt;</span><br><span class="line">&lt;&#x2F;dependency&gt;</span><br><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;mysql&lt;&#x2F;groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;mysql-connector-java&lt;&#x2F;artifactId&gt;</span><br><span class="line">    &lt;version&gt;8.0.16&lt;&#x2F;version&gt;</span><br><span class="line">&lt;&#x2F;dependency&gt;</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="Select"><a href="#Select" class="headerlink" title="Select"></a>Select</h3><ul>
<li>配置mybatis/<strong>mybatis-configuration.xml</strong><br> 作为MyBatis的全局配置文件,其配置了MyBatis的运行环境信息(如数据源/mapper文件等).</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;UTF-8&quot; ?&gt;</span><br><span class="line">&lt;!DOCTYPE configuration PUBLIC &quot;-&#x2F;&#x2F;mybatis.org&#x2F;&#x2F;DTD Config 3.0&#x2F;&#x2F;EN&quot;</span><br><span class="line">        &quot;http:&#x2F;&#x2F;mybatis.org&#x2F;dtd&#x2F;mybatis-3-config.dtd&quot;&gt;</span><br><span class="line">&lt;configuration&gt;</span><br><span class="line"></span><br><span class="line">    &lt;environments default&#x3D;&quot;development&quot;&gt;</span><br><span class="line">        &lt;environment id&#x3D;&quot;development&quot;&gt;</span><br><span class="line">            &lt;!-- 配置JDBC事务管理--&gt;</span><br><span class="line">            &lt;transactionManager type&#x3D;&quot;JDBC&quot;&#x2F;&gt;</span><br><span class="line">            &lt;!-- 配置数据源--&gt;</span><br><span class="line">            &lt;dataSource type&#x3D;&quot;POOLED&quot;&gt;</span><br><span class="line">                &lt;property name&#x3D;&quot;driver&quot; value&#x3D;&quot;com.mysql.jdbc.Driver&quot;&#x2F;&gt;</span><br><span class="line">                &lt;property name&#x3D;&quot;url&quot; value&#x3D;&quot;jdbc:mysql:&#x2F;&#x2F;host:port&#x2F;db?characterEncoding&#x3D;utf-8&quot;&#x2F;&gt;</span><br><span class="line">                &lt;property name&#x3D;&quot;username&quot; value&#x3D;&quot;username&quot;&#x2F;&gt;</span><br><span class="line">                &lt;property name&#x3D;&quot;password&quot; value&#x3D;&quot;password&quot;&#x2F;&gt;</span><br><span class="line">            &lt;&#x2F;dataSource&gt;</span><br><span class="line">        &lt;&#x2F;environment&gt;</span><br><span class="line">    &lt;&#x2F;environments&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 加载mapper映射文件 --&gt;</span><br><span class="line">    &lt;mappers&gt;</span><br><span class="line">        &lt;mapper resource&#x3D;&quot;mybatis&#x2F;mapper&#x2F;UserDAO.xml&quot;&#x2F;&gt;</span><br><span class="line">    &lt;&#x2F;mappers&gt;</span><br><span class="line">&lt;&#x2F;configuration&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>书写UserDAO(mapper映射)<br> 最为MyBatis最核心的部分,配置了操作数据库的<strong>SQL语句</strong>:</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;UTF-8&quot; ?&gt;</span><br><span class="line">&lt;!DOCTYPE mapper PUBLIC &quot;-&#x2F;&#x2F;mybatis.org&#x2F;&#x2F;DTD Mapper 3.0&#x2F;&#x2F;EN&quot; &quot;http:&#x2F;&#x2F;mybatis.org&#x2F;dtd&#x2F;mybatis-3-mapper.dtd&quot;&gt;</span><br><span class="line">&lt;mapper namespace&#x3D;&quot;namespace&quot;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;select id&#x3D;&quot;selectUserById&quot; parameterType&#x3D;&quot;java.lang.Integer&quot; resultType&#x3D;&quot;com.fq.domain.User&quot;&gt;</span><br><span class="line">        SELECT * FROM user WHERE id &#x3D; #&#123;id&#125;;</span><br><span class="line">    &lt;&#x2F;select&gt;</span><br><span class="line"></span><br><span class="line">    &lt;select id&#x3D;&quot;selectUserByName&quot; parameterType&#x3D;&quot;java.lang.String&quot; resultType&#x3D;&quot;com.fq.domain.User&quot;&gt;</span><br><span class="line">        SELECT * FROM user WHERE name LIKE &#39;%$&#123;value&#125;%&#39;;</span><br><span class="line">    &lt;&#x2F;select&gt;</span><br><span class="line"></span><br><span class="line">&lt;&#x2F;mapper&gt;</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>属性</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>namespace</code></td>
<td>命名空间,用于隔离SQL语句</td>
</tr>
<tr>
<td><code>parameterType</code></td>
<td>定义SQL输入映射类型,MyBatis通过**<em>OGNL**</em>从输入对象中获取参数传入SQL语句.</td>
</tr>
<tr>
<td><code>resultType</code></td>
<td>定义SQL输出映射类型,MyBatis将SQL查询结果的<strong>一行记录</strong>映射为<code>resultType</code>指定的类型.</td>
</tr>
</tbody></table>
<blockquote>
<p>mapper映射文件名有<em>UserDAO.xml</em>/<em>UserMapper.xml</em>/<em>User.xml</em>等几种形式, 其一般存放在与mybatis-configuration.xml同级的mapper目录下,由于其主要作用为定义SQL语句与映射关系, 因此一般统称为**<em>mapper映射文件**</em>.</p>
</blockquote>
<ul>
<li>定义PO类<br> PO类主要作用为SQL(输入/输出)映射,通常与数据库表对应:</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;**</span><br><span class="line"> * @author zhanghao</span><br><span class="line"> * @since 15&#x2F;12&#x2F;31 下午2:27.</span><br><span class="line"> *&#x2F;</span><br><span class="line">public class User &#123;</span><br><span class="line"></span><br><span class="line">    private Integer id;</span><br><span class="line"></span><br><span class="line">    private String name;</span><br><span class="line"></span><br><span class="line">    private String password;</span><br><span class="line"></span><br><span class="line">    public User() &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public User(Integer id, String name, String password) &#123;</span><br><span class="line">        this.id &#x3D; id;</span><br><span class="line">        this.name &#x3D; name;</span><br><span class="line">        this.password &#x3D; password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public Integer getId() &#123;</span><br><span class="line">        return id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setId(Integer id) &#123;</span><br><span class="line">        this.id &#x3D; id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getName() &#123;</span><br><span class="line">        return name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setName(String name) &#123;</span><br><span class="line">        this.name &#x3D; name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public String getPassword() &#123;</span><br><span class="line">        return password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    public void setPassword(String password) &#123;</span><br><span class="line">        this.password &#x3D; password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public String toString() &#123;</span><br><span class="line">        return &quot;User&#123;&quot; +</span><br><span class="line">                &quot;id&#x3D;&quot; + id +</span><br><span class="line">                &quot;, name&#x3D;&#39;&quot; + name + &#39; &#39;&#39; +</span><br><span class="line">                &quot;, password&#x3D;&#39;&quot; + password + &#39; &#39;&#39; +</span><br><span class="line">                &#39;&#125;&#39;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>UserDAO(Java对象)<br> 获得SqlSession,执行SQL语句, 得到映射结果:</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;**</span><br><span class="line"> * @author zhanghao</span><br><span class="line"> * @since 16&#x2F;2&#x2F;24 下午6:15.</span><br><span class="line"> *&#x2F;</span><br><span class="line">public class UserDAO &#123;</span><br><span class="line"></span><br><span class="line">    private SqlSessionFactory factory;</span><br><span class="line"></span><br><span class="line">    @Before</span><br><span class="line">    public void setUp() throws IOException &#123;</span><br><span class="line">        String resource &#x3D; &quot;mybatis&#x2F;mybatis-configuration.xml&quot;;</span><br><span class="line">        factory &#x3D; new SqlSessionFactoryBuilder().build(Resources.getResourceAsStream(resource));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Test</span><br><span class="line">    public void selectUserById() &#123;</span><br><span class="line">        try (SqlSession session &#x3D; factory.openSession()) &#123;</span><br><span class="line">            User user &#x3D; session.selectOne(&quot;namespace.selectUserById&quot;, 1);</span><br><span class="line">            System.out.println(user);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Test</span><br><span class="line">    public void selectUserByName() &#123;</span><br><span class="line">        try (SqlSession session &#x3D; factory.openSession()) &#123;</span><br><span class="line">            List&lt;User&gt; users &#x3D; session.selectList(&quot;namespace.selectUserByName&quot;, &quot;student&quot;);</span><br><span class="line">            for (User user : users) &#123;</span><br><span class="line">                System.out.println(user);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="Insert"><a href="#Insert" class="headerlink" title="Insert"></a>Insert</h3><ul>
<li>mapper</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;insert id&#x3D;&quot;insertUser&quot; parameterType&#x3D;&quot;com.fq.domain.User&quot;&gt;</span><br><span class="line">    INSERT INTO user(name, password) VALUES(#&#123;name&#125;, #&#123;password&#125;);</span><br><span class="line">&lt;&#x2F;insert&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>UserDAO</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">public void insertUser() &#123;</span><br><span class="line">    try (SqlSession session &#x3D; factory.openSession()) &#123;</span><br><span class="line">        User user &#x3D; new User();</span><br><span class="line">        user.setName(&quot;new_name1&quot;);</span><br><span class="line">        user.setPassword(&quot;new_password&quot;);</span><br><span class="line">        session.insert(&quot;namespace.insertUser&quot;, user);</span><br><span class="line">        session.commit();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="自增主键返回"><a href="#自增主键返回" class="headerlink" title="自增主键返回"></a>自增主键返回</h3><p>修改mapper文件,添加<selectKey>,可以将MySQL的自增主键(即刚刚插入数据时生成的ID)返回:</selectKey></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;insert id&#x3D;&quot;insertUser&quot; parameterType&#x3D;&quot;com.fq.domain.User&quot;&gt;</span><br><span class="line">    &lt;selectKey keyProperty&#x3D;&quot;id&quot; order&#x3D;&quot;AFTER&quot; resultType&#x3D;&quot;java.lang.Integer&quot;&gt;</span><br><span class="line">        SELECT LAST_INSERT_ID();</span><br><span class="line">    &lt;&#x2F;selectKey&gt;</span><br><span class="line">    INSERT INTO user(name, password) VALUES(#&#123;name&#125;, #&#123;password&#125;);</span><br><span class="line">&lt;&#x2F;insert&gt;</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>属性</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>keyProperty</code></td>
<td>指定存储到DO中的哪个属性;</td>
</tr>
<tr>
<td><code>order</code></td>
<td><code>selectKey</code>执行顺序(相对于<code>insert</code>语句),<code>AFTER</code>/<code>BEFORE</code>;</td>
</tr>
<tr>
<td><code>resultType</code></td>
<td>主键返回类型(DO中对应属性的类型);</td>
</tr>
<tr>
<td><code>LAST_INSERT_ID()</code></td>
<td>MySQL函数,返回**<em>auto_increment **</em>自增列新记录值.</td>
</tr>
</tbody></table>
<ul>
<li>UserDAO</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">public void insertUser() &#123;</span><br><span class="line">    try (SqlSession session &#x3D; factory.openSession()) &#123;</span><br><span class="line">        System.out.println(session);</span><br><span class="line">        User user &#x3D; new User(null, &quot;new_name&quot;, &quot;new_password&quot;);</span><br><span class="line">        session.insert(&quot;namespace.insertUser&quot;, user);</span><br><span class="line">        &#x2F;&#x2F; 需要在commit之后才能获得自增主键</span><br><span class="line">        session.commit();</span><br><span class="line">        System.out.println(user.getId());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>该功能还可以通过<insert>的useGeneratedKeys/keyProperty两个属性合作完成, 详见<a target="_blank" rel="noopener" href="http://www.mybatis.org/mybatis-3/zh/sqlmap-xml.html#insert_update_and_delete">MyBatis文档</a>.</insert></p>
</blockquote>
<hr>
<h3 id="Update"><a href="#Update" class="headerlink" title="Update"></a>Update</h3><ul>
<li>mapper</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;update id&#x3D;&quot;updateUserById&quot; parameterType&#x3D;&quot;com.fq.domain.User&quot;&gt;</span><br><span class="line">    UPDATE user SET name &#x3D; #&#123;name&#125;, password &#x3D; #&#123;password&#125; WHERE id &#x3D; #&#123;id&#125;;</span><br><span class="line">&lt;&#x2F;update&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>UserDAO</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">public void updateUserById() &#123;</span><br><span class="line">    try (SqlSession session &#x3D; factory.openSession(true)) &#123;</span><br><span class="line">        session.update(&quot;namespace.updateUserById&quot;,</span><br><span class="line">                new User(1, &quot;feiqing&quot;, &quot;ICy5YqxZB1uWSwcVLSNLcA&#x3D;&#x3D;&quot;));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;1234567</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="Delete"><a href="#Delete" class="headerlink" title="Delete"></a>Delete</h3><ul>
<li>mapper</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;delete id&#x3D;&quot;deleteUserById&quot; parameterType&#x3D;&quot;java.lang.Integer&quot;&gt;</span><br><span class="line">    DELETE FROM user WHERE id &#x3D; #&#123;id&#125;;</span><br><span class="line">&lt;&#x2F;delete&gt;123</span><br></pre></td></tr></table></figure>

<ul>
<li>UserDAO</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@Test</span><br><span class="line">public void deleteUserById() &#123;</span><br><span class="line">    try (SqlSession session &#x3D; factory.openSession(true)) &#123;</span><br><span class="line">        session.delete(&quot;namespace.deleteUserById&quot;, 51615);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="小结"><a href="#小结" class="headerlink" title="小结"></a>小结</h3><ul>
<li><code>#&#123;&#125;</code>/<code>$&#123;&#125;</code><ul>
<li><code>#&#123;&#125;</code>: 表示一个占位符号,实现向<code>PreparedStatement</code>占位符中设置值(<code>#&#123;&#125;</code>表示一个占位符<code>?</code>),自动进行Java类型到JDBC类型的转换(因此<code>#&#123;&#125;</code>可以有效防止SQL注入).<code>#&#123;&#125;</code>可以接收简单类型或PO属性值,如果<code>parameterType</code>传输的是单个简单类型值,<code>#&#123;&#125;</code>花括号中可以是<code>value</code>或其它名称.</li>
<li><code>$&#123;&#125;</code>: 表示拼接SQL串,通过<code>$&#123;&#125;</code>可将<code>parameterType</code>内容**<em>拼接**</em>在SQL中而<em>不进行JDBC类型转换</em>,<code>$&#123;&#125;</code>可以接收简单类型或PO属性值,如果<code>parameterType</code>传输的是单个简单类型值,<code>$&#123;&#125;</code>花括号中只能是<code>value</code>.<br> 虽然<code>$&#123;&#125;</code>不能防止SQL注入,但有时<code>$&#123;&#125;</code>会非常方便(如<code>order by</code>排序,需要将列名通过参数传入SQL,则用<code>ORDER BY $&#123;column&#125;</code>,使用<code>#&#123;&#125;</code>则无法实现此功能(详见<a target="_blank" rel="noopener" href="http://blog.csdn.net/zjf280441589/article/details/50714873">JDBC基础</a>关于<code>PreparedStatement</code>的讨论).</li>
</ul>
</li>
<li><code>SqlSession</code><br> 提供操作数据库的方法(如:<code>selectOne</code>/<code>selectList</code>).但<code>SqlSession</code>是线程不安全的,因此最好将其定义成局部变量使用.</li>
<li>MyBatis优点(与JDBC相比) <ul>
<li>SQL写在Java代码中导致不易维护, 而MyBatis将SQL写在mapper中,XML与Java代码分离.</li>
<li>向SQL语句传参繁琐(如:SQL的<strong>where条件</strong>不一,SQL数据类型与Java不同),MyBatis通过<code>parameterType</code>自动将Java对象映射至SQL语句.</li>
<li>结果集解析麻烦(SQL变化导致解析代码变化,SQL数据类型与Java不同),MyBatis通过<code>resultType</code>自动将SQL执行结果映射成Java对象.</li>
</ul>
</li>
</ul>
<hr>
<p>附: 最好在pom.xml中添加一个日志系统实现(logback/log4j), 这样会在调试程序时打印日志信息,便于查错, 以logback为例:</p>
<ul>
<li>pom.xml</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;dependency&gt;</span><br><span class="line">    &lt;groupId&gt;ch.qos.logback&lt;&#x2F;groupId&gt;</span><br><span class="line">    &lt;artifactId&gt;logback-classic&lt;&#x2F;artifactId&gt;</span><br><span class="line">    &lt;version&gt;1.1.2&lt;&#x2F;version&gt;</span><br><span class="line">&lt;&#x2F;dependency&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>logback.xml</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;configuration&gt;</span><br><span class="line"></span><br><span class="line">    &lt;property name&#x3D;&quot;logRoot&quot; value&#x3D;&quot;&#x2F;data&#x2F;logs&quot;&#x2F;&gt;</span><br><span class="line">    &lt;property name&#x3D;&quot;pattern&quot; value&#x3D;&quot;%d&#123;HH:mm:ss.SSS&#125; [%thread] %-5level %logger&#123;0&#125; - %msg%n&quot;&#x2F;&gt;</span><br><span class="line"></span><br><span class="line">    &lt;appender name&#x3D;&quot;STDOUT&quot; class&#x3D;&quot;ch.qos.logback.core.ConsoleAppender&quot;&gt;</span><br><span class="line">        &lt;encoder&gt;</span><br><span class="line">            &lt;pattern&gt;$&#123;pattern&#125;&lt;&#x2F;pattern&gt;</span><br><span class="line">        &lt;&#x2F;encoder&gt;</span><br><span class="line">    &lt;&#x2F;appender&gt;</span><br><span class="line">    &lt;appender name&#x3D;&quot;FILE&quot; class&#x3D;&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;&gt;</span><br><span class="line">        &lt;rollingPolicy class&#x3D;&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;&gt;</span><br><span class="line">            &lt;fileNamePattern&gt;$&#123;logRoot&#125;&#x2F;common-server.%d&#123;yyyy-MM-dd&#125;.log&lt;&#x2F;fileNamePattern&gt;</span><br><span class="line">            &lt;maxHistory&gt;7&lt;&#x2F;maxHistory&gt;</span><br><span class="line">        &lt;&#x2F;rollingPolicy&gt;</span><br><span class="line">        &lt;encoder&gt;</span><br><span class="line">            &lt;pattern&gt;$&#123;pattern&#125;&lt;&#x2F;pattern&gt;</span><br><span class="line">        &lt;&#x2F;encoder&gt;</span><br><span class="line">    &lt;&#x2F;appender&gt;</span><br><span class="line"></span><br><span class="line">    &lt;root level&#x3D;&quot;DEBUG&quot;&gt;</span><br><span class="line">        &lt;appender-ref ref&#x3D;&quot;STDOUT&quot;&#x2F;&gt;</span><br><span class="line">        &lt;appender-ref ref&#x3D;&quot;FILE&quot;&#x2F;&gt;</span><br><span class="line">    &lt;&#x2F;root&gt;</span><br><span class="line"></span><br><span class="line">&lt;&#x2F;configuration&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>其他关于MyBatis日志的详细信息可参考<a target="_blank" rel="noopener" href="http://www.mybatis.org/mybatis-3/zh/logging.html">MyBatis文档日志部分</a>.</p>
</blockquote>
<hr>
<h2 id="DAO开发"><a href="#DAO开发" class="headerlink" title="DAO开发"></a>DAO开发</h2><p>使用MyBatis开发DAO有两个方法,<strong>原始DAO开发</strong>与<strong>Mapper映射DAO开发</strong>.</p>
<hr>
<h3 id="原始DAO开发"><a href="#原始DAO开发" class="headerlink" title="原始DAO开发"></a>原始DAO开发</h3><p>原始DAO开发需要开发人员编写<strong>DAO接口</strong>与<strong>DAO实现</strong>,如根据ID查询用户信息:</p>
<ul>
<li>mapper(同前)</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;select id&#x3D;&quot;selectUserById&quot; parameterType&#x3D;&quot;java.lang.Integer&quot; resultType&#x3D;&quot;com.fq.domain.User&quot;&gt;</span><br><span class="line">    SELECT * FROM user WHERE id &#x3D; #&#123;id&#125;;</span><br><span class="line">&lt;&#x2F;select&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>UserDAO接口</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;**</span><br><span class="line"> * @author zhanghao</span><br><span class="line"> * @since 16&#x2F;2&#x2F;22 上午10:20.</span><br><span class="line"> *&#x2F;</span><br><span class="line">public interface UserDAO &#123;</span><br><span class="line">    User selectUserById(Integer id) throws Exception;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>UserDAO实现</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">public class UserDAOImpl implements UserDAO &#123;</span><br><span class="line"></span><br><span class="line">    private SqlSessionFactory factory;</span><br><span class="line"></span><br><span class="line">    public UserDAOImpl(SqlSessionFactory factory) &#123;</span><br><span class="line">        this.factory &#x3D; factory;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Override</span><br><span class="line">    public User selectUserById(Integer id) throws Exception &#123;</span><br><span class="line">        SqlSession session &#x3D; factory.openSession();</span><br><span class="line">        User user &#x3D; session.selectOne(&quot;namespace.selectUserById&quot;, id);</span><br><span class="line">        session.close();</span><br><span class="line">        return user;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>Client</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">public class MyBatisClient &#123;</span><br><span class="line"></span><br><span class="line">    @Test</span><br><span class="line">    public void originalClient() throws Exception &#123;</span><br><span class="line">        UserDAO dao &#x3D; new UserDAOImpl(new SqlSessionFactoryBuilder().</span><br><span class="line">                build(ClassLoader.getSystemResourceAsStream(&quot;mybatis&#x2F;mybatis-configuration.xml&quot;)));</span><br><span class="line">        User user &#x3D; dao.selectUserById(1);</span><br><span class="line">        System.out.println(user);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>原始DAO开发中存在的问题: <ol>
<li>DAO实现方法体中存在很多过程性代码. </li>
<li>调用<code>SqlSession</code>的方法(<code>select</code>/<code>insert</code>/<code>update</code>)需要指定<em>Statement</em>的id,存在硬编码,不利于代码维护.</li>
</ol>
</li>
</ul>
<hr>
<h3 id="Mapper映射开发"><a href="#Mapper映射开发" class="headerlink" title="Mapper映射开发"></a>Mapper映射开发</h3><p>mapper映射开发方法只需编写DAO接口,MyBatis根据接口定义与mapper文件中的SQL语句动态创建接口实现.</p>
<ul>
<li>mapper</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version&#x3D;&quot;1.0&quot; encoding&#x3D;&quot;UTF-8&quot; ?&gt;</span><br><span class="line">&lt;!DOCTYPE mapper PUBLIC &quot;-&#x2F;&#x2F;mybatis.org&#x2F;&#x2F;DTD Mapper 3.0&#x2F;&#x2F;EN&quot; &quot;http:&#x2F;&#x2F;mybatis.org&#x2F;dtd&#x2F;mybatis-3-mapper.dtd&quot;&gt;</span><br><span class="line">&lt;mapper namespace&#x3D;&quot;com.fq.mybatis.UserDAO&quot;&gt;</span><br><span class="line">    &lt;select id&#x3D;&quot;selectUserById&quot; parameterType&#x3D;&quot;java.lang.Integer&quot; resultType&#x3D;&quot;com.fq.domain.User&quot;&gt;</span><br><span class="line">        SELECT * FROM user WHERE id &#x3D; #&#123;id&#125;;</span><br><span class="line">    &lt;&#x2F;select&gt;</span><br><span class="line">&lt;&#x2F;mapper&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意: 此时<code>namespace</code>必须与<code>UserDAO</code>接口的全限定名相同.</p>
</blockquote>
<ul>
<li>UserDAO接口与前面相同, 但不再使用<code>UserDAOImpl</code></li>
<li>Client</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;**</span><br><span class="line"> * @author zhanghao</span><br><span class="line"> * @since 16&#x2F;2&#x2F;22 下午2:57.</span><br><span class="line"> *&#x2F;</span><br><span class="line">public class MyBatisClient &#123;</span><br><span class="line"></span><br><span class="line">    private SqlSession session;</span><br><span class="line"></span><br><span class="line">    private SqlSessionFactory factory;</span><br><span class="line"></span><br><span class="line">    @Before</span><br><span class="line">    public void setUp() &#123;</span><br><span class="line">        factory &#x3D; new SqlSessionFactoryBuilder().</span><br><span class="line">                build(ClassLoader.getSystemResourceAsStream(&quot;mybatis&#x2F;mybatis-configuration.xml&quot;));</span><br><span class="line">        session &#x3D; factory.openSession();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @Test</span><br><span class="line">    public void mapperClient() throws Exception &#123;</span><br><span class="line">        UserDAO dao &#x3D; session.getMapper(UserDAO.class);</span><br><span class="line">        User user &#x3D; dao.selectUserById(1);</span><br><span class="line">        System.out.println(user);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    @After</span><br><span class="line">    public void tearDown() &#123;</span><br><span class="line">        session.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<ul>
<li>mapper映射开发方法需要遵循以下规范: <ol>
<li>mapper文件中的namespace与DAO接口的全限定名相同;</li>
<li>mapper文件中的<em>Statement</em>的id与DAO接口方法名相同;</li>
<li>mapper文件中的<em>Statement</em>的<code>parameterType</code>/<code>resultType</code>与DAO方法的入参/回参类型相同.</li>
</ol>
</li>
</ul>
</blockquote>
<hr>
<h2 id="Mapper映射"><a href="#Mapper映射" class="headerlink" title="Mapper映射"></a>Mapper映射</h2><p>mapper映射文件(如UserDAO.xml)主要作用是定义SQL语句(每个SQL是一个<em>Statement</em>),是MyBatis的核心.</p>
<blockquote>
<p>MyBatis官方推荐使用mapper映射的方法来开发DAO,因此我们以后就不再过多介绍原始DAO的开发.</p>
</blockquote>
<hr>
<h3 id="输入映射"><a href="#输入映射" class="headerlink" title="输入映射"></a>输入映射</h3><h4 id="多个形参"><a href="#多个形参" class="headerlink" title="多个形参"></a>多个形参</h4><p>传递简单类型前面示例已经使用过,在此就不再赘述.当需要传递多个形参时,不再需要设置<code>parameterType</code>参数:</p>
<ul>
<li>mapper</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;update id&#x3D;&quot;updateUserById&quot;&gt;</span><br><span class="line">    UPDATE user SET name &#x3D; #&#123;1&#125;, password &#x3D; #&#123;2&#125; WHERE id &#x3D; #&#123;0&#125;;</span><br><span class="line">&lt;&#x2F;update&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>UserDAO</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">void updateUserById(Integer id, String name, String password) throws Exception;</span><br></pre></td></tr></table></figure>

<hr>
<h4 id="传入PO"><a href="#传入PO" class="headerlink" title="传入PO"></a>传入PO</h4><p>MyBatis使用<strong>OGNL</strong>表达式解析对象属性值:</p>
<ul>
<li>mapper</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;select id&#x3D;&quot;selectUserByNamePassword&quot; parameterType&#x3D;&quot;com.fq.domain.User&quot; resultType&#x3D;&quot;com.fq.domain.User&quot;&gt;</span><br><span class="line">    SELECT *</span><br><span class="line">    FROM user</span><br><span class="line">    WHERE name &#x3D; #&#123;name&#125; AND password &#x3D; #&#123;password&#125;;</span><br><span class="line">&lt;&#x2F;select&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>UserDAO</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">User selectUserByNamePassword(User user) throws Exception;</span><br></pre></td></tr></table></figure>

<hr>
<h4 id="传入Map"><a href="#传入Map" class="headerlink" title="传入Map"></a>传入Map</h4><ul>
<li>mapper</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;select id&#x3D;&quot;selectUserByMap&quot; parameterType&#x3D;&quot;java.util.Map&quot; resultType&#x3D;&quot;com.fq.domain.User&quot;&gt;</span><br><span class="line">    SELECT *</span><br><span class="line">    FROM user</span><br><span class="line">    WHERE name &#x3D; #&#123;name&#125; AND password &#x3D; #&#123;password&#125;;</span><br><span class="line">&lt;&#x2F;select&gt;</span><br></pre></td></tr></table></figure>

<blockquote>
<p><code>#&#123;&#125;</code>花括号内对应<code>Map</code>的<code>key</code>.</p>
</blockquote>
<ul>
<li>UserDAO</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">User selectUserByMap(Map&lt;String, Object&gt; map) throws Exception;</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="输出映射"><a href="#输出映射" class="headerlink" title="输出映射"></a>输出映射</h3><h4 id="输出简单类型"><a href="#输出简单类型" class="headerlink" title="输出简单类型"></a>输出简单类型</h4><ul>
<li>mapper</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;select id&#x3D;&quot;selectUserCount&quot; parameterType&#x3D;&quot;java.lang.String&quot; resultType&#x3D;&quot;java.lang.Integer&quot;&gt;</span><br><span class="line">    SELECT count(*)</span><br><span class="line">    FROM user</span><br><span class="line">    WHERE name LIKE &#39;%$&#123;value&#125;%&#39;;</span><br><span class="line">&lt;&#x2F;select&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>UserDAO</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Integer selectUserCount(String name) throws Exception;1</span><br></pre></td></tr></table></figure>

<blockquote>
<p>返回简单类型必须保证**<em>查询结果只有一行记录 **</em>,最终将第一个字段的值转换为输出类型.</p>
</blockquote>
<hr>
<h4 id="输出PO对象-列表"><a href="#输出PO对象-列表" class="headerlink" title="输出PO对象/列表"></a>输出PO对象/列表</h4><ul>
<li><p>前面已经演示过输出两种类型(  <code> selectUserById </code>  /<code>  selectUserByName</code>  虽然当时使用的是原始DAO开发方法, 但mapper定义形式大同小异),因此在这儿只做简单总结: </p>
<ol>
<li>输出单个PO对象和输出PO列表在mapper中定义的<code>resultType</code>是一样的;</li>
<li>输出单个PO对象要保证SQL查询结果为单条数据,其内部使用<code>selectOne</code>方法调用;</li>
<li>输出PO列表表示<strong>查询结果可能为多条</strong>,其内部使用<code>selectList</code>方法调用,接口返回值可用<code>List</code>/<code>Set</code>承载.</li>
</ol>
</li>
</ul>
<hr>
<h4 id="输出Map"><a href="#输出Map" class="headerlink" title="输出Map"></a>输出Map</h4><p>输出PO对象完全可以改用<code>Map</code>输出,<strong>字段名作key,字段值作value</strong>.</p>
<ul>
<li>mapper</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;select id&#x3D;&quot;selectUserLikeName&quot; resultType&#x3D;&quot;java.util.Map&quot;&gt;</span><br><span class="line">    SELECT *</span><br><span class="line">    FROM user</span><br><span class="line">    WHERE name LIKE &#39;%$&#123;value&#125;%&#39;;</span><br><span class="line">&lt;&#x2F;select&gt;12345</span><br></pre></td></tr></table></figure>

<ul>
<li>UserDAO</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">List&lt;Map&lt;String, Object&gt;&gt; selectUserLikeName(String name) throws Exception;1</span><br></pre></td></tr></table></figure>

<hr>
<h3 id="resultMap"><a href="#resultMap" class="headerlink" title="resultMap"></a>resultMap</h3><p><code>resultType</code>可将查询结果映射为PO,但前提是<strong>PO属性名</strong>与<strong>SQL字段名</strong>必须一致,如不一致,则可通过<code>resultMap</code>作对应映射:</p>
<ul>
<li>mapper</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;resultMap id&#x3D;&quot;userMap&quot; type&#x3D;&quot;com.fq.domain.User&quot;&gt;</span><br><span class="line">    &lt;id column&#x3D;&quot;user_id&quot; property&#x3D;&quot;id&quot;&#x2F;&gt;</span><br><span class="line">    &lt;result column&#x3D;&quot;user_name&quot; property&#x3D;&quot;name&quot;&#x2F;&gt;</span><br><span class="line">    &lt;result column&#x3D;&quot;user_password&quot; property&#x3D;&quot;password&quot;&#x2F;&gt;</span><br><span class="line">&lt;&#x2F;resultMap&gt;</span><br><span class="line"></span><br><span class="line">&lt;select id&#x3D;&quot;selectUserByName&quot; parameterType&#x3D;&quot;java.lang.String&quot; resultMap&#x3D;&quot;userMap&quot;&gt;</span><br><span class="line">    SELECT</span><br><span class="line">        id       user_id,</span><br><span class="line">        name     user_name,</span><br><span class="line">        password user_password</span><br><span class="line">    FROM user</span><br><span class="line">    WHERE name &#x3D; #&#123;name&#125;;</span><br><span class="line">&lt;&#x2F;select&gt;</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>属性</th>
<th>描述</th>
</tr>
</thead>
<tbody><tr>
<td><code>id</code></td>
<td>表示查询结果集的唯一标识;</td>
</tr>
<tr>
<td><code>result</code></td>
<td>表示普通结果,即PO属性;</td>
</tr>
<tr>
<td><code>column</code></td>
<td>表示SQL查询出来的字段名,</td>
</tr>
<tr>
<td><code>property</code></td>
<td>表示PO属性.</td>
</tr>
</tbody></table>
<ul>
<li>UserDAO接口同前.</li>
</ul>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">Zhang Hao</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://example.com/2020/10/28/MyBatis/MyBatis%20%E5%AE%9E%E8%B7%B5%20%20-Mapper%E4%B8%8EDAO/">http://example.com/2020/10/28/MyBatis/MyBatis%20%E5%AE%9E%E8%B7%B5%20%20-Mapper%E4%B8%8EDAO/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://example.com" target="_blank">欢迎来到SuperZhang的个人空间</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/MyBatis/">MyBatis</a><a class="post-meta__tags" href="/tags/%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/">项目实战</a></div><div class="post_share"><div class="social-share" data-image="/2020/10/28/MyBatis/MyBatis%20%E5%AE%9E%E8%B7%B5%20%20-Mapper%E4%B8%8EDAO/MyBatis1.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2020/10/28/MyBatis/SpringBoot%20%E6%95%B4%E5%90%88Mybais/"><img class="prev-cover" src="/2020/10/28/MyBatis/SpringBoot%20%E6%95%B4%E5%90%88Mybais/MyBatis3.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">SpringBoot整合Mybatis完整详细版</div></div></a></div><div class="next-post pull-right"><a href="/2020/10/26/IDEA/IDEA-Maven%E6%8A%A5Unable-to-import-maven-project/"><img class="next-cover" src="/2020/10/26/IDEA/IDEA-Maven%E6%8A%A5Unable-to-import-maven-project/Idea1.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">IDEA-Maven报Unable-to-import-maven-project</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span> 相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2020/10/28/MyBatis/MyBatis之整合Spring（Dao和Mapper两种方式）/" title="MyBatis之整合Spring（Dao和Mapper两种方式）"><img class="cover" src="/2020/10/28/MyBatis/MyBatis%E4%B9%8B%E6%95%B4%E5%90%88Spring%EF%BC%88Dao%E5%92%8CMapper%E4%B8%A4%E7%A7%8D%E6%96%B9%E5%BC%8F%EF%BC%89/MyBatis2.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-10-28</div><div class="title">MyBatis之整合Spring（Dao和Mapper两种方式）</div></div></a></div><div><a href="/2020/10/28/MyBatis/SpringBoot 整合Mybais/" title="SpringBoot整合Mybatis完整详细版"><img class="cover" src="/2020/10/28/MyBatis/SpringBoot%20%E6%95%B4%E5%90%88Mybais/MyBatis3.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2020-10-28</div><div class="title">SpringBoot整合Mybatis完整详细版</div></div></a></div></div></div></div><div class="aside_content" id="aside_content"><div class="card-widget card-info"><div class="card-content"><div class="card-info-avatar is-center"><img class="avatar-img" src="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-info__name">Zhang Hao</div><div class="author-info__description">一个热爱技术又充满乐趣的灵魂</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">39</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">24</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">10</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/ZhangHao0810"><i class="fab fa-github"></i><span>Follow my Github</span></a></div></div><div class="card-widget card-announcement"><div class="card-content"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">你好呀~欢迎来到我的小世界。记录自己生活工作中遇到的各种问题。</div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="card-content"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#MyBatis-%E5%AE%9E%E8%B7%B5-Mapper%E4%B8%8EDAO"><span class="toc-number">1.</span> <span class="toc-text">MyBatis 实践  -Mapper与DAO</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#MyBatis%E7%AE%80%E4%BB%8B"><span class="toc-number">1.1.</span> <span class="toc-text">MyBatis简介</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%88%9D%E8%AF%86MyBatis"><span class="toc-number">1.2.</span> <span class="toc-text">初识MyBatis</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Select"><span class="toc-number">1.2.1.</span> <span class="toc-text">Select</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Insert"><span class="toc-number">1.2.2.</span> <span class="toc-text">Insert</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%A2%9E%E4%B8%BB%E9%94%AE%E8%BF%94%E5%9B%9E"><span class="toc-number">1.2.3.</span> <span class="toc-text">自增主键返回</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Update"><span class="toc-number">1.2.4.</span> <span class="toc-text">Update</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Delete"><span class="toc-number">1.2.5.</span> <span class="toc-text">Delete</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B0%8F%E7%BB%93"><span class="toc-number">1.2.6.</span> <span class="toc-text">小结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DAO%E5%BC%80%E5%8F%91"><span class="toc-number">1.3.</span> <span class="toc-text">DAO开发</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8E%9F%E5%A7%8BDAO%E5%BC%80%E5%8F%91"><span class="toc-number">1.3.1.</span> <span class="toc-text">原始DAO开发</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Mapper%E6%98%A0%E5%B0%84%E5%BC%80%E5%8F%91"><span class="toc-number">1.3.2.</span> <span class="toc-text">Mapper映射开发</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Mapper%E6%98%A0%E5%B0%84"><span class="toc-number">1.4.</span> <span class="toc-text">Mapper映射</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BE%93%E5%85%A5%E6%98%A0%E5%B0%84"><span class="toc-number">1.4.1.</span> <span class="toc-text">输入映射</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%9A%E4%B8%AA%E5%BD%A2%E5%8F%82"><span class="toc-number">1.4.1.1.</span> <span class="toc-text">多个形参</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BC%A0%E5%85%A5PO"><span class="toc-number">1.4.1.2.</span> <span class="toc-text">传入PO</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BC%A0%E5%85%A5Map"><span class="toc-number">1.4.1.3.</span> <span class="toc-text">传入Map</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BE%93%E5%87%BA%E6%98%A0%E5%B0%84"><span class="toc-number">1.4.2.</span> <span class="toc-text">输出映射</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BE%93%E5%87%BA%E7%AE%80%E5%8D%95%E7%B1%BB%E5%9E%8B"><span class="toc-number">1.4.2.1.</span> <span class="toc-text">输出简单类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BE%93%E5%87%BAPO%E5%AF%B9%E8%B1%A1-%E5%88%97%E8%A1%A8"><span class="toc-number">1.4.2.2.</span> <span class="toc-text">输出PO对象&#x2F;列表</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BE%93%E5%87%BAMap"><span class="toc-number">1.4.2.3.</span> <span class="toc-text">输出Map</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#resultMap"><span class="toc-number">1.4.3.</span> <span class="toc-text">resultMap</span></a></li></ol></li></ol></li></ol></div></div></div><div class="card-widget card-recent-post"><div class="card-content"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2020/11/16/Hexo/Hexo-%E5%88%9B%E5%BB%BA%E7%9B%B8%E5%86%8C%E5%9B%BE%E5%BA%93%E4%BB%A5%E5%8F%8A%E7%9B%B8%E5%86%8C/" title="Hexo-创建相册图库以及相册"><img src="/2020/11/16/Hexo/Hexo-%E5%88%9B%E5%BB%BA%E7%9B%B8%E5%86%8C%E5%9B%BE%E5%BA%93%E4%BB%A5%E5%8F%8A%E7%9B%B8%E5%86%8C/%E7%9B%B8%E5%86%8C.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Hexo-创建相册图库以及相册"/></a><div class="content"><a class="title" href="/2020/11/16/Hexo/Hexo-%E5%88%9B%E5%BB%BA%E7%9B%B8%E5%86%8C%E5%9B%BE%E5%BA%93%E4%BB%A5%E5%8F%8A%E7%9B%B8%E5%86%8C/" title="Hexo-创建相册图库以及相册">Hexo-创建相册图库以及相册</a><time datetime="2020-11-16T06:42:28.000Z" title="发表于 2020-11-16 14:42:28">2020-11-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2020/11/16/Hexo/Hexo%E5%8D%9A%E5%AE%A2-%E6%90%9C%E7%B4%A2%E5%8A%9F%E8%83%BD%E5%AE%9E%E7%8E%B0/" title="Hexo博客-搜索功能实现"><img src="/2020/11/16/Hexo/Hexo%E5%8D%9A%E5%AE%A2-%E6%90%9C%E7%B4%A2%E5%8A%9F%E8%83%BD%E5%AE%9E%E7%8E%B0/123.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Hexo博客-搜索功能实现"/></a><div class="content"><a class="title" href="/2020/11/16/Hexo/Hexo%E5%8D%9A%E5%AE%A2-%E6%90%9C%E7%B4%A2%E5%8A%9F%E8%83%BD%E5%AE%9E%E7%8E%B0/" title="Hexo博客-搜索功能实现">Hexo博客-搜索功能实现</a><time datetime="2020-11-16T05:36:16.000Z" title="发表于 2020-11-16 13:36:16">2020-11-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2020/11/16/%E7%94%B5%E8%84%91%E6%93%8D%E4%BD%9C/Word%E4%B8%ADTab%E7%9A%84%E7%BC%A9%E8%BF%9B%E9%87%8F%E8%AE%BE%E7%BD%AE/" title="Word中Tab的缩进量设置"><img src="/2020/11/16/%E7%94%B5%E8%84%91%E6%93%8D%E4%BD%9C/Word%E4%B8%ADTab%E7%9A%84%E7%BC%A9%E8%BF%9B%E9%87%8F%E8%AE%BE%E7%BD%AE/Word.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Word中Tab的缩进量设置"/></a><div class="content"><a class="title" href="/2020/11/16/%E7%94%B5%E8%84%91%E6%93%8D%E4%BD%9C/Word%E4%B8%ADTab%E7%9A%84%E7%BC%A9%E8%BF%9B%E9%87%8F%E8%AE%BE%E7%BD%AE/" title="Word中Tab的缩进量设置">Word中Tab的缩进量设置</a><time datetime="2020-11-16T02:40:03.000Z" title="发表于 2020-11-16 10:40:03">2020-11-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2020/11/16/%E7%94%B5%E8%84%91%E6%93%8D%E4%BD%9C/word%E6%96%87%E7%AB%A0%E4%B8%AD%E5%BF%AB%E9%80%9F%E6%A0%B7%E5%BC%8F-%E6%A0%87%E9%A2%982345-%E7%AD%89%E6%89%BE%E4%B8%8D%E5%88%B0%E4%BA%86%E6%80%8E%E4%B9%88%E5%8A%9E/" title="word文章中快速样式-标题2345-等找不到了怎么办"><img src="/2020/11/16/%E7%94%B5%E8%84%91%E6%93%8D%E4%BD%9C/word%E6%96%87%E7%AB%A0%E4%B8%AD%E5%BF%AB%E9%80%9F%E6%A0%B7%E5%BC%8F-%E6%A0%87%E9%A2%982345-%E7%AD%89%E6%89%BE%E4%B8%8D%E5%88%B0%E4%BA%86%E6%80%8E%E4%B9%88%E5%8A%9E/Word.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="word文章中快速样式-标题2345-等找不到了怎么办"/></a><div class="content"><a class="title" href="/2020/11/16/%E7%94%B5%E8%84%91%E6%93%8D%E4%BD%9C/word%E6%96%87%E7%AB%A0%E4%B8%AD%E5%BF%AB%E9%80%9F%E6%A0%B7%E5%BC%8F-%E6%A0%87%E9%A2%982345-%E7%AD%89%E6%89%BE%E4%B8%8D%E5%88%B0%E4%BA%86%E6%80%8E%E4%B9%88%E5%8A%9E/" title="word文章中快速样式-标题2345-等找不到了怎么办">word文章中快速样式-标题2345-等找不到了怎么办</a><time datetime="2020-11-16T01:41:17.000Z" title="发表于 2020-11-16 09:41:17">2020-11-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2020/11/14/IDEA/%E5%9C%A8Intellij-IDEA%E4%B8%AD%E4%BD%BF%E7%94%A8Debug/" title="在Intellij-IDEA中使用Debug"><img src="/2020/11/14/IDEA/%E5%9C%A8Intellij-IDEA%E4%B8%AD%E4%BD%BF%E7%94%A8Debug/Idea3.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="在Intellij-IDEA中使用Debug"/></a><div class="content"><a class="title" href="/2020/11/14/IDEA/%E5%9C%A8Intellij-IDEA%E4%B8%AD%E4%BD%BF%E7%94%A8Debug/" title="在Intellij-IDEA中使用Debug">在Intellij-IDEA中使用Debug</a><time datetime="2020-11-14T06:52:37.000Z" title="发表于 2020-11-14 14:52:37">2020-11-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2020/11/14/IDEA/%E5%A6%82%E4%BD%95%E8%B0%83%E5%87%BAIDEA%E7%9A%84Maven-Project%E8%A7%86%E5%9B%BE/" title="如何调出IDEA的Maven-Project视图"><img src="/2020/11/14/IDEA/%E5%A6%82%E4%BD%95%E8%B0%83%E5%87%BAIDEA%E7%9A%84Maven-Project%E8%A7%86%E5%9B%BE/Idea3.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="如何调出IDEA的Maven-Project视图"/></a><div class="content"><a class="title" href="/2020/11/14/IDEA/%E5%A6%82%E4%BD%95%E8%B0%83%E5%87%BAIDEA%E7%9A%84Maven-Project%E8%A7%86%E5%9B%BE/" title="如何调出IDEA的Maven-Project视图">如何调出IDEA的Maven-Project视图</a><time datetime="2020-11-14T06:38:59.000Z" title="发表于 2020-11-14 14:38:59">2020-11-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2020/11/14/IDEA/idea2019%E7%89%88%E4%B8%8Emaven3-6-2%E7%89%88%E6%9C%AC%E4%B8%8D%E5%85%BC%E5%AE%B9%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/" title="idea2019版与maven3-6-2版本不兼容的解决方法"><img src="/2020/11/14/IDEA/idea2019%E7%89%88%E4%B8%8Emaven3-6-2%E7%89%88%E6%9C%AC%E4%B8%8D%E5%85%BC%E5%AE%B9%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/Idea2.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="idea2019版与maven3-6-2版本不兼容的解决方法"/></a><div class="content"><a class="title" href="/2020/11/14/IDEA/idea2019%E7%89%88%E4%B8%8Emaven3-6-2%E7%89%88%E6%9C%AC%E4%B8%8D%E5%85%BC%E5%AE%B9%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95/" title="idea2019版与maven3-6-2版本不兼容的解决方法">idea2019版与maven3-6-2版本不兼容的解决方法</a><time datetime="2020-11-14T06:33:26.000Z" title="发表于 2020-11-14 14:33:26">2020-11-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2020/11/14/Git/git%E5%87%BA%E7%8E%B0RPC-failed-curl-56-OpenSSL-SSL-read-SSL-ERROR-SYSCALL-errfno-10054/" title="git出现RPC failed; curl 56 OpenSSL SSL_read: SSL_ERROR_SYSCALL, errfno 10054"><img src="/2020/11/14/Git/git%E5%87%BA%E7%8E%B0RPC-failed-curl-56-OpenSSL-SSL-read-SSL-ERROR-SYSCALL-errfno-10054/Git%E6%8E%92%E9%94%99.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="git出现RPC failed; curl 56 OpenSSL SSL_read: SSL_ERROR_SYSCALL, errfno 10054"/></a><div class="content"><a class="title" href="/2020/11/14/Git/git%E5%87%BA%E7%8E%B0RPC-failed-curl-56-OpenSSL-SSL-read-SSL-ERROR-SYSCALL-errfno-10054/" title="git出现RPC failed; curl 56 OpenSSL SSL_read: SSL_ERROR_SYSCALL, errfno 10054">git出现RPC failed; curl 56 OpenSSL SSL_read: SSL_ERROR_SYSCALL, errfno 10054</a><time datetime="2020-11-14T02:44:12.000Z" title="发表于 2020-11-14 10:44:12">2020-11-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2020/11/14/Java/%E5%B0%86Java%E9%A1%B9%E7%9B%AE%E8%BD%AC%E6%8D%A2%E6%88%90exe%E5%8F%AF%E6%89%A7%E8%A1%8C%E6%96%87%E4%BB%B6/" title="将Java项目转换成exe可执行文件"><img src="/2020/11/14/Java/%E5%B0%86Java%E9%A1%B9%E7%9B%AE%E8%BD%AC%E6%8D%A2%E6%88%90exe%E5%8F%AF%E6%89%A7%E8%A1%8C%E6%96%87%E4%BB%B6/Java1.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="将Java项目转换成exe可执行文件"/></a><div class="content"><a class="title" href="/2020/11/14/Java/%E5%B0%86Java%E9%A1%B9%E7%9B%AE%E8%BD%AC%E6%8D%A2%E6%88%90exe%E5%8F%AF%E6%89%A7%E8%A1%8C%E6%96%87%E4%BB%B6/" title="将Java项目转换成exe可执行文件">将Java项目转换成exe可执行文件</a><time datetime="2020-11-14T01:53:47.000Z" title="发表于 2020-11-14 09:53:47">2020-11-14</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2020/11/08/GitHub/Github%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95%EF%BC%9A%E5%A6%82%E4%BD%95%E5%B0%86%E6%9C%AC%E5%9C%B0%E7%9A%84%E6%96%87%E4%BB%B6%E5%A4%B9%E6%95%B4%E4%BD%93%E4%B8%8A%E4%BC%A0%E5%88%B0Github%E4%B8%8A/" title="Github使用方法：如何将本地的文件夹整体上传到Github上"><img src="/2020/11/08/GitHub/Github%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95%EF%BC%9A%E5%A6%82%E4%BD%95%E5%B0%86%E6%9C%AC%E5%9C%B0%E7%9A%84%E6%96%87%E4%BB%B6%E5%A4%B9%E6%95%B4%E4%BD%93%E4%B8%8A%E4%BC%A0%E5%88%B0Github%E4%B8%8A/GitHub3.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Github使用方法：如何将本地的文件夹整体上传到Github上"/></a><div class="content"><a class="title" href="/2020/11/08/GitHub/Github%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95%EF%BC%9A%E5%A6%82%E4%BD%95%E5%B0%86%E6%9C%AC%E5%9C%B0%E7%9A%84%E6%96%87%E4%BB%B6%E5%A4%B9%E6%95%B4%E4%BD%93%E4%B8%8A%E4%BC%A0%E5%88%B0Github%E4%B8%8A/" title="Github使用方法：如何将本地的文件夹整体上传到Github上">Github使用方法：如何将本地的文件夹整体上传到Github上</a><time datetime="2020-11-08T12:01:23.000Z" title="发表于 2020-11-08 20:01:23">2020-11-08</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2020 By Zhang Hao</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">Hi, welcome to ZhangHao0810's blog!</div><div class="icp"><a target="_blank" rel="noopener" href="http://www.beian.miit.gov.cn/state/outPortal/loginPortal.action"><img class="icp-icon" src="/img/icp.png" alt="ICP"/><span>鲁ICP备xxxx</span></a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>由</span> <a target="_blank" rel="noopener" href="https://github.com/wzpan/hexo-generator-search" style="color:#49B1F5;">hexo-generator-search</a>
 <span>提供支持</span></div></div></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script src="/js/search/local-search.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',()=> {preloader.endLoading()})</script><div class="js-pjax"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><script defer="defer" id="ribbon" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/canvas-ribbon.min.js" size="150" alpha="0.6" zIndex="-1" mobile="false" data-click="true"></script><script id="click-show-text" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/click-show-text.min.js" async="async" mobile="false"></script></div></body></html>